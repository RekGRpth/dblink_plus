\c contrib_regression_utf8
-- concat(any) varchar2_b
EXPLAIN (COSTS FALSE) 
WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, 'あいう') = ' abcbaあいう' ORDER BY id;
                                    QUERY PLAN                                    
----------------------------------------------------------------------------------
 Sort
   Sort Key: ft_varchar2_b_varchar.id
   CTE ft_varchar2_b_varchar
     ->  Foreign Scan on ft_varchar2_b_varchar
           Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_varchar2_b"
   ->  CTE Scan on ft_varchar2_b_varchar
         Filter: (pg_catalog.concat(val1, 'あいう') = ' abcbaあいう'::text)
(7 rows)

EXPLAIN (COSTS FALSE) 
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, 'あいう') = ' abcbaあいう' ORDER BY id;
                                                           QUERY PLAN                                                            
---------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: id
   ->  Foreign Scan on ft_varchar2_b_varchar
         Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_varchar2_b" WHERE (CONCAT("val1",'あいう') = ' abcbaあいう')
(4 rows)

WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, 'あいう') = ' abcbaあいう' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, 'あいう') = ' abcbaあいう' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, '') = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, '') = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, NULL) = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, NULL) = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

-- NG case
WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, NULL) = '' ORDER BY id;
 id | val1 
----+------
  1 | 
  2 | 
(2 rows)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, NULL) = '' ORDER BY id;
 id | val1 
----+------
(0 rows)

-- NG case
WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, NULL) IS NULL ORDER BY id;
 id | val1 
----+------
(0 rows)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, NULL) IS NULL ORDER BY id;
 id | val1 
----+------
  1 | 
  2 | 
(2 rows)

WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat('あいう', val1) = 'あいう abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat('あいう', val1) = 'あいう abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat('', val1) = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat('', val1) = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(NULL, val1) = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(NULL, val1) = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

-- NG case
WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(NULL, val1) = '' ORDER BY id;
 id | val1 
----+------
  1 | 
  2 | 
(2 rows)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(NULL, val1) = '' ORDER BY id;
 id | val1 
----+------
(0 rows)

-- NG case
WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(NULL, val1) IS NULL ORDER BY id;
 id | val1 
----+------
(0 rows)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(NULL, val1) IS NULL ORDER BY id;
 id | val1 
----+------
  1 | 
  2 | 
(2 rows)

EXPLAIN (COSTS FALSE) 
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, '1.1e10'::real) = ' abcba1.1e+10' ORDER BY id;
                                                           QUERY PLAN                                                            
---------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: id
   ->  Foreign Scan on ft_varchar2_b_varchar
         Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_varchar2_b" WHERE (CONCAT("val1",1.1e+10) = ' abcba1.1e+10')
(4 rows)

WITH ft_varchar2_b_varchar AS (SELECT id, val1 FROM ft_varchar2_b_varchar)
SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, '1.1e10'::real) = ' abcba1.1e+10' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_varchar2_b_varchar WHERE concat(val1, '1.1e10'::real) = ' abcba1.1e+10' ORDER BY id;
 id | val1 
----+------
(0 rows)

-- concat(any) nclob
EXPLAIN (COSTS FALSE) 
WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, 'あいう') = ' abcbaあいう' ORDER BY id;
                                 QUERY PLAN                                  
-----------------------------------------------------------------------------
 Sort
   Sort Key: ft_nclob_text.id
   CTE ft_nclob_text
     ->  Foreign Scan on ft_nclob_text
           Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_nclob"
   ->  CTE Scan on ft_nclob_text
         Filter: (pg_catalog.concat(val1, 'あいう') = ' abcbaあいう'::text)
(7 rows)

EXPLAIN (COSTS FALSE) 
SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, 'あいう') = ' abcbaあいう' ORDER BY id;
                                                         QUERY PLAN                                                         
----------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: id
   ->  Foreign Scan on ft_nclob_text
         Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_nclob" WHERE (CONCAT("val1",'あいう') = ' abcbaあいう')
(4 rows)

WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, 'あいう') = ' abcbaあいう' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, 'あいう') = ' abcbaあいう' ORDER BY id;
ERROR:  OCI_ERROR - ORA-00932: データ型が一致しません: -が予想されましたがNCLOBです。

WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, '') = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, '') = ' abcba' ORDER BY id;
ERROR:  OCI_ERROR - ORA-00932: データ型が一致しません: -が予想されましたがNCLOBです。

WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, NULL) = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, NULL) = ' abcba' ORDER BY id;
ERROR:  OCI_ERROR - ORA-00932: データ型が一致しません: -が予想されましたがNCLOBです。

-- NG case
WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, NULL) = '' ORDER BY id;
 id | val1 
----+------
  1 | 
  2 | 
(2 rows)

SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, NULL) = '' ORDER BY id;
ERROR:  OCI_ERROR - ORA-00932: データ型が一致しません: -が予想されましたがNCLOBです。

-- NG case
WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, NULL) IS NULL ORDER BY id;
 id | val1 
----+------
(0 rows)

SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, NULL) IS NULL ORDER BY id;
 id | val1 
----+------
  1 | 
  2 | 
(2 rows)

WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat('あいう', val1) = 'あいう abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_nclob_text WHERE concat('あいう', val1) = 'あいう abcba' ORDER BY id;
ERROR:  OCI_ERROR - ORA-00932: データ型が一致しません: -が予想されましたがCLOBです。

WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat('', val1) = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_nclob_text WHERE concat('', val1) = ' abcba' ORDER BY id;
ERROR:  OCI_ERROR - ORA-00932: データ型が一致しません: -が予想されましたがCLOBです。

WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat(NULL, val1) = ' abcba' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_nclob_text WHERE concat(NULL, val1) = ' abcba' ORDER BY id;
ERROR:  OCI_ERROR - ORA-00932: データ型が一致しません: -が予想されましたがCLOBです。

-- NG case
WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat(NULL, val1) = '' ORDER BY id;
 id | val1 
----+------
  1 | 
  2 | 
(2 rows)

SELECT id, val1 FROM ft_nclob_text WHERE concat(NULL, val1) = '' ORDER BY id;
ERROR:  OCI_ERROR - ORA-00932: データ型が一致しません: -が予想されましたがCLOBです。

-- NG case
WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat(NULL, val1) IS NULL ORDER BY id;
 id | val1 
----+------
(0 rows)

SELECT id, val1 FROM ft_nclob_text WHERE concat(NULL, val1) IS NULL ORDER BY id;
 id | val1 
----+------
  1 | 
  2 | 
(2 rows)

EXPLAIN (COSTS FALSE) 
SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, '1.1e10'::real) = ' abcba1.1e+10' ORDER BY id;
                                                         QUERY PLAN                                                         
----------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: id
   ->  Foreign Scan on ft_nclob_text
         Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_nclob" WHERE (CONCAT("val1",1.1e+10) = ' abcba1.1e+10')
(4 rows)

WITH ft_nclob_text AS (SELECT id, val1 FROM ft_nclob_text)
SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, '1.1e10'::real) = ' abcba1.1e+10' ORDER BY id;
 id |  val1  
----+--------
  5 |  abcba
(1 row)

SELECT id, val1 FROM ft_nclob_text WHERE concat(val1, '1.1e10'::real) = ' abcba1.1e+10' ORDER BY id;
ERROR:  OCI_ERROR - ORA-00932: データ型が一致しません: -が予想されましたがNCLOBです。

-- concat(any) char_b
EXPLAIN (COSTS FALSE) 
WITH ft_char_b AS (SELECT id, val1 FROM ft_char_b)
SELECT id, val1 FROM ft_char_b WHERE concat(val1, 'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう' ORDER BY id;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      QUERY PLAN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: ft_char_b.id
   CTE ft_char_b
     ->  Foreign Scan on ft_char_b
           Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_char_b"
   ->  CTE Scan on ft_char_b
         Filter: (pg_catalog.concat(val1, 'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう'::text)
(7 rows)

EXPLAIN (COSTS FALSE) 
SELECT id, val1 FROM ft_char_b WHERE concat(val1, 'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう' ORDER BY id;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              QUERY PLAN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: id
   ->  Foreign Scan on ft_char_b
         Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_char_b" WHERE (CONCAT("val1",'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう')
(4 rows)

WITH ft_char_b AS (SELECT id, val1 FROM ft_char_b)
SELECT id, val1 FROM ft_char_b WHERE concat(val1, 'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう' ORDER BY id;
 id |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       val1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
----+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  5 |  abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
(1 row)

SELECT id, val1 FROM ft_char_b WHERE concat(val1, 'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう' ORDER BY id;
 id |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       val1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
----+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  5 |  abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
(1 row)

-- concat(any) char_c
EXPLAIN (COSTS FALSE) 
WITH ft_char_c AS (SELECT id, val1 FROM ft_char_c)
SELECT id, val1 FROM ft_char_c WHERE concat(val1, 'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう' ORDER BY id;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      QUERY PLAN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: ft_char_c.id
   CTE ft_char_c
     ->  Foreign Scan on ft_char_c
           Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_char_c"
   ->  CTE Scan on ft_char_c
         Filter: (pg_catalog.concat(val1, 'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう'::text)
(7 rows)

EXPLAIN (COSTS FALSE) 
SELECT id, val1 FROM ft_char_c WHERE concat(val1, 'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう' ORDER BY id;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              QUERY PLAN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: id
   ->  Foreign Scan on ft_char_c
         Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_char_c" WHERE (CONCAT("val1",'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう')
(4 rows)

WITH ft_char_c AS (SELECT id, val1 FROM ft_char_c)
SELECT id, val1 FROM ft_char_c WHERE concat(val1, 'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう' ORDER BY id;
 id |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       val1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
----+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  5 |  abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
(1 row)

SELECT id, val1 FROM ft_char_c WHERE concat(val1, 'あいう') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あいう' ORDER BY id;
 id |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       val1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
----+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  5 |  abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
(1 row)

-- concat(any) nchar
EXPLAIN (COSTS FALSE) 
WITH ft_nchar AS (SELECT id, val1 FROM ft_nchar)
SELECT id, val1 FROM ft_nchar WHERE concat(val1, '') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ' ORDER BY id;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                QUERY PLAN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: ft_nchar.id
   CTE ft_nchar
     ->  Foreign Scan on ft_nchar
           Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_nchar"
   ->  CTE Scan on ft_nchar
         Filter: (pg_catalog.concat(val1, '') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          '::text)
(7 rows)

EXPLAIN (COSTS FALSE) 
SELECT id, val1 FROM ft_nchar WHERE concat(val1, '') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ' ORDER BY id;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        QUERY PLAN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: id
   ->  Foreign Scan on ft_nchar
         Remote SQL: SELECT "id", "val1", NULL FROM "oracle_fdw"."t_nchar" WHERE (CONCAT("val1",'') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ')
(4 rows)

WITH ft_nchar AS (SELECT id, val1 FROM ft_nchar)
SELECT id, val1 FROM ft_nchar WHERE concat(val1, '') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ' ORDER BY id;
 id |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       val1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
----+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  5 |  abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
(1 row)

SELECT id, val1 FROM ft_nchar WHERE concat(val1, '') = ' abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ' ORDER BY id;
 id |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       val1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
----+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  5 |  abcba                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
(1 row)

